<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // requestAnimationFrame
        function animationTest() {
            let animationId;
            const button = document.createElement("button");
            button.innerHTML = "停止动画"
            button.style.position = 'absolute'
            button.style.top = '150px';
            button.style.left = '0px';
            button.style.zIndex = '999999'
            button.onclick = () => {
                if (!!animationId) {
                    window.cancelAnimationFrame(animationId);
                    button.innerHTML = "开始动画"
                    animationId = void 0;
                } else {
                    move()
                    button.innerHTML = "停止动画"
                }
            }

            const div = document.createElement("div");
            div.style.width = '100px'
            div.style.height = '100px'
            div.style.position = 'absolute'
            div.style.top = '0px';
            div.style.left = '0px';
            div.style.backgroundColor = '#f00'
            div.style.zIndex = '999999'
            document.body.appendChild(div);
            document.body.appendChild(button);

            let distance = 0;
            function move() {
                distance++
                console.log(distance) // 打印当前帧，方块移动的距离
                div.style.left = distance + 'px'
                animationId = requestAnimationFrame(move); // 通知浏览器开始绘制下一帧的时候，继续执行move函数
            }
            move();
        }
        animationTest()
    </script>
</body>

</html>