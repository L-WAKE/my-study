<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>观察者模式</title>
</head>
<body>
    <p>观察者模式又称发布订阅模式（Publish/Subscribe Pattern），是我们经常接触到的设计模式，日常生活中的应用也比比皆是，比如你订阅了某个博主的频道，当有内容更新时会收到推送；又比如JavaScript中的事件订阅响应机制。观察者模式的思想用一句话描述就是：被观察对象（subject）维护一组观察者（observer），当被观察对象状态改变时，通过调用观察者的某个方法将这些变化通知到观察者。</p>
</body>
<script>
    //被订阅者
    function Subject(){
        this.observers=[]
    }
    Subject.prototype={
        subscribe(observer){
            this.observers.push(observer)
        },
        unsubscribe(){
            this.observers=this.observers.filter(observer=>{
                return observer!==observerToRemove
            })
        },
        fire(){
            this.observers.forEach(observer=>{
                observer.call()
            })
        }
    }
    const subject=new Subject()
    function observer1(){
        console.log('observer1')
    }
    function observer2(){
        console.log('observer2')
    }
    function observer3(){
        console.log('observer3')
    }
    subject.subscribe(observer1)
    subject.subscribe(observer2)
    subject.subscribe(observer3)
    subject.fire()
</script>
</html>